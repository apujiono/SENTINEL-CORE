<!DOCTYPE html>
<html>
<head>
  <title>🌍 Global Threat Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>#map { height: 100vh; }</style>
</head>
<body>
  <div id="map"></div>
  <script>
    const map = L.map('map').setView([31.5, 34.5], 6); // Palestina
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

    // Tambahkan Gaza
    L.marker([31.5, 34.5]).addTo(map)
      .bindPopup("Gaza — Under Attack")
      .openPopup();

    // Tambahkan Jakarta
    L.marker([-6.2, 106.8]).addTo(map)
      .bindPopup("Jakarta — Anti-Corruption Ops");

    // Update dari API
    setInterval(() => {
      fetch('/api/sightings').then(r => r.json()).then(sightings => {
        sightings.forEach(s => {
          L.marker([Math.random()*5+30, Math.random()*5+34]).addTo(map)
            .bindPopup(`🚨 ${s.target} terlihat`);
        });
      });
    }, 30000);
  </script>
</body>
</html>